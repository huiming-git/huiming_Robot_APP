# 1. 第一步：先加载接口驱动 (告诉 OpenOCD 我们要用 CMSIS-DAP)
# 只有执行了这一行，后面的 cmsis-dap 命令才会生效
source [find interface/cmsis-dap.cfg]

# 2. 第二步：强制设置后端为 HID (修复 v2 兼容性问题的关键)
# 注意：这里我们用了新语法 'cmsis-dap backend'，消除了警告
cmsis-dap backend hid

# 3. 第三步：选择 SWD 通信协议
transport select swd

# 4. 第四步：加载 STM32F4 目标芯片配置
source [find target/stm32f4x.cfg]